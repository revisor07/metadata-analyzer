<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Charts</title>
</head>

<body>
<script src="https://cdn.zingchart.com/zingchart.min.js"></script>


<center> <h1>Line Graph</h1> </center>
<div id="threeSeries"></div>
<script>
db = {};
ids = [];
innerHeights = [];
innerWidths = [];
VSnull = 0;
VSgood = 0;
VSpoor = 0;
async function getData() {
        try {
            var res = await fetch('https://pwned135.site/api/browser');
            var data = await res.json();
            db = data;
        } catch (err) {
            console.error(err.message);
        }
}
getData().then(() => {
  for (x in db){
    ids.push(db[x].id)
    innerHeights.push(JSON.parse(db[x].data).innerHeight)
    innerWidths.push(JSON.parse(db[x].data).innerWidth)
    console.log(db)
    if(JSON.parse(db[x].vitalsScore == null))
      VSNull ++;
    else if (JSON.parse(db[x].vitalsScore == "poor"))
      VSpoor ++;
    else if (JSON.parse(db[x].vitalsScore == "good"))
      VSgood ++;
  }
})



getData().then(() => {
  zingchart.render({
    id: 'threeSeries',
    data: {
      type: 'line',
      series: [
        { values: ids },
        { values: innerHeights }
      ]
    }
  });
})
</script>

<center> <h1>Bar Graph</h1> </center>
<div id="twoSeries"></div>
<script>
getData().then(() => {
  zingchart.render({
    id: 'twoSeries',
    data: {
      type: 'bar',
      series: [
        { values: innerHeights },
        { values: innerWidths }
      ]
    }
  });
})
</script>

<center> <h1>Pie Chart</h1> </center>
<div id="pie"></div>
<script>
getData().then(() => {
  zingchart.render({
    id: 'pie',
    data: {
      type: 'pie',
      series: [
        { values: [VSnull] },
        { values: [VSgood] },
        { values: [VSpoor] }
      ]
    }
  });
})
</script>
</body>

</html>
